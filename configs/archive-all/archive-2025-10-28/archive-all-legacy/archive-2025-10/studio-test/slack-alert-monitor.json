{
  "visualizations": {
    "viz_header": {
      "type": "viz.markdown",
      "options": {
        "markdown": "# ğŸ“Š Slack ì•Œë¦¼ ëª¨ë‹ˆí„°ë§\n\n**Settings â†’ Searches, reports, and alerts** ì—ì„œ Enable/Disable"
      }
    },
    "viz_total_fired": {
      "type": "viz.singlevalue",
      "options": {
        "sparklineDisplay": "off",
        "unit": "ê±´",
        "unitPosition": "after",
        "majorColor": "#6DB7C6",
        "backgroundColor": "transparent"
      },
      "dataSources": {
        "primary": "ds_total_fired"
      },
      "title": "ì´ ë°œì†¡ (24ì‹œê°„)"
    },
    "viz_active_alerts": {
      "type": "viz.singlevalue",
      "options": {
        "sparklineDisplay": "off",
        "unit": "ê°œ",
        "unitPosition": "after",
        "majorColor": "#65A637",
        "backgroundColor": "transparent"
      },
      "dataSources": {
        "primary": "ds_active_alerts"
      },
      "title": "í™œì„± ì•Œë¦¼"
    },
    "viz_alert_table": {
      "type": "viz.table",
      "options": {
        "count": 10
      },
      "dataSources": {
        "primary": "ds_alert_status"
      },
      "title": "ğŸ”” ì•Œë¦¼ ë°œì†¡ í˜„í™©"
    },
    "viz_recent_fired": {
      "type": "viz.table",
      "options": {
        "count": 20
      },
      "dataSources": {
        "primary": "ds_recent_fired"
      },
      "title": "ğŸ“© ìµœê·¼ ë°œì†¡ ë‚´ì—­"
    }
  },
  "dataSources": {
    "ds_total_fired": {
      "type": "ds.search",
      "options": {
        "query": "index=_audit action=\"alert_fired\" (savedsearch_name=\"FAZ_Critical_Alerts\" OR savedsearch_name=\"FMG_Policy_Install\" OR savedsearch_name=\"FMG_Policy_CRUD\" OR savedsearch_name=\"FMG_Admin_Login\") | stats count",
        "queryParameters": {
          "earliest": "-24h@h",
          "latest": "now"
        }
      },
      "name": "ì´ ë°œì†¡ ê±´ìˆ˜"
    },
    "ds_active_alerts": {
      "type": "ds.search",
      "options": {
        "query": "| rest /services/saved/searches | search title=\"FAZ_*\" OR title=\"FMG_*\" | search disabled=0 | stats count",
        "queryParameters": {
          "earliest": "-5m",
          "latest": "now"
        }
      },
      "name": "í™œì„± ì•Œë¦¼ ìˆ˜"
    },
    "ds_alert_status": {
      "type": "ds.search",
      "options": {
        "query": "index=_audit action=\"alert_fired\" (savedsearch_name=\"FAZ_Critical_Alerts\" OR savedsearch_name=\"FMG_Policy_Install\" OR savedsearch_name=\"FMG_Policy_CRUD\" OR savedsearch_name=\"FMG_Admin_Login\") | stats count as fired_count latest(_time) as last_fired by savedsearch_name | eval last_fired_str=strftime(last_fired, \"%Y-%m-%d %H:%M:%S\") | eval status=if(fired_count > 0, \"ğŸŸ¢ ì •ìƒ\", \"âšª ëŒ€ê¸°\") | table savedsearch_name, status, fired_count, last_fired_str | rename savedsearch_name as \"ì•Œë¦¼ ì´ë¦„\", status as \"ìƒíƒœ\", fired_count as \"ë°œì†¡ íšŸìˆ˜\", last_fired_str as \"ë§ˆì§€ë§‰ ë°œì†¡\" | sort -\"ë°œì†¡ íšŸìˆ˜\"",
        "queryParameters": {
          "earliest": "-24h@h",
          "latest": "now"
        }
      },
      "name": "ì•Œë¦¼ ìƒíƒœ"
    },
    "ds_recent_fired": {
      "type": "ds.search",
      "options": {
        "query": "index=_audit action=\"alert_fired\" (savedsearch_name=\"FAZ_Critical_Alerts\" OR savedsearch_name=\"FMG_Policy_Install\" OR savedsearch_name=\"FMG_Policy_CRUD\" OR savedsearch_name=\"FMG_Admin_Login\") | eval time_str=strftime(_time, \"%Y-%m-%d %H:%M:%S\") | table time_str, savedsearch_name, user | rename time_str as \"ì‹œê°„\", savedsearch_name as \"ì•Œë¦¼ ì´ë¦„\", user as \"ì‚¬ìš©ì\" | head 20",
        "queryParameters": {
          "earliest": "-24h@h",
          "latest": "now"
        }
      },
      "name": "ìµœê·¼ ë°œì†¡"
    }
  },
  "defaults": {
    "dataSources": {
      "ds.search": {
        "options": {
          "queryParameters": {
            "latest": "$global_time.latest$",
            "earliest": "$global_time.earliest$"
          }
        }
      }
    }
  },
  "inputs": {},
  "layout": {
    "type": "absolute",
    "options": {
      "width": 1440,
      "height": 960,
      "display": "auto-scale"
    },
    "structure": [
      {
        "item": "viz_header",
        "type": "block",
        "position": {
          "x": 0,
          "y": 0,
          "w": 1440,
          "h": 80
        }
      },
      {
        "item": "viz_total_fired",
        "type": "block",
        "position": {
          "x": 0,
          "y": 80,
          "w": 720,
          "h": 150
        }
      },
      {
        "item": "viz_active_alerts",
        "type": "block",
        "position": {
          "x": 720,
          "y": 80,
          "w": 720,
          "h": 150
        }
      },
      {
        "item": "viz_alert_table",
        "type": "block",
        "position": {
          "x": 0,
          "y": 230,
          "w": 1440,
          "h": 300
        }
      },
      {
        "item": "viz_recent_fired",
        "type": "block",
        "position": {
          "x": 0,
          "y": 530,
          "w": 1440,
          "h": 430
        }
      }
    ],
    "globalInputs": []
  },
  "description": "Slack ì•Œë¦¼ ë°œì†¡ í˜„í™© ëª¨ë‹ˆí„°ë§ (GitHub í…œí”Œë¦¿ ê¸°ë°˜)",
  "title": "Slack ì•Œë¦¼ ëª¨ë‹ˆí„°ë§"
}
