{
  "visualizations": {
    "viz_title": {
      "type": "viz.markdown",
      "options": {
        "markdown": "# ğŸ›ï¸ Slack ì•Œë¦¼ ì œì–´ íŒ¨ë„\n\n**FortiAnalyzer/FortiManager ì•Œë¦¼ ON/OFF ì œì–´**\n\n4ê°œ ì•Œë¦¼ ê·œì¹™ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í™œì„±í™”/ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
      }
    },
    "viz_instructions": {
      "type": "viz.markdown",
      "options": {
        "markdown": "## ğŸ“– ì‚¬ìš© ë°©ë²•\n\n1. **ê°œë³„ ì œì–´**: ê° ì•Œë¦¼ì˜ í† ê¸€ ë²„íŠ¼ìœ¼ë¡œ ON/OFF\n2. **ì¼ê´„ ì œì–´**: ëª¨ë“  ì•Œë¦¼ì„ í•œ ë²ˆì— í™œì„±í™”/ë¹„í™œì„±í™”\n3. **ìƒíƒœ í™•ì¸**: 30ì´ˆë§ˆë‹¤ ìë™ ê°±ì‹ \n\n---\n\n## âš ï¸ ì•Œë¦¼ ê·œì¹™ (4ê°œ)\n\n- **FAZ_Critical_Alerts**: FAZ í¬ë¦¬í‹°ì»¬ ì´ë²¤íŠ¸\n- **FMG_Policy_Install**: FMG ì •ì±… ì„¤ì¹˜\n- **FMG_Policy_CRUD**: FMG ì •ì±… CRUD\n- **FMG_Object_CRUD**: FMG ê°ì²´ CRUD\n\n---\n\n## ğŸ”§ ë¬¸ì œ í•´ê²°\n\n**ì•Œë¦¼ì´ ì‘ë™í•˜ì§€ ì•Šìœ¼ë©´:**\n\n1. Settings â†’ Alert actions â†’ Slack ì„¤ì • í™•ì¸\n2. Slack Webhook URL í™•ì¸\n3. Slack ë´‡ì„ ì±„ë„ì— ì´ˆëŒ€: `/invite @Splunk Alert`\n4. ì•Œë¦¼ ë¡œê·¸ í™•ì¸: `index=_internal source=*scheduler.log savedsearch_name=\"FAZ_*\" OR savedsearch_name=\"FMG_*\"`"
      }
    },
    "viz_faz_status": {
      "type": "splunk.singlevalue",
      "title": "FAZ Critical Alerts",
      "dataSources": {
        "primary": "ds_faz_status"
      },
      "options": {
        "majorValue": "> sparklineValues | lastPoint()",
        "trendValue": "> sparklineValues | delta(-2)",
        "sparklineValues": "> primary | seriesByName('status')",
        "numberPrecision": 0,
        "unit": "",
        "majorColor": "> majorValue | rangeValue(majorColorEditorConfig)",
        "trendColor": "> trendValue | rangeValue(trendColorEditorConfig)",
        "showSparklineAreaGraph": false
      },
      "context": {
        "majorColorEditorConfig": [
          {
            "value": 0,
            "to": 1,
            "from": 0
          }
        ],
        "trendColorEditorConfig": [
          {
            "value": "#d93f3c",
            "to": 0,
            "from": -1000000000
          },
          {
            "value": "#65a637",
            "to": 1000000000,
            "from": 0.00001
          }
        ]
      }
    },
    "viz_fmg_install_status": {
      "type": "splunk.singlevalue",
      "title": "FMG Policy Install",
      "dataSources": {
        "primary": "ds_fmg_install_status"
      },
      "options": {
        "majorValue": "> sparklineValues | lastPoint()",
        "sparklineValues": "> primary | seriesByName('status')",
        "numberPrecision": 0,
        "majorColor": "> majorValue | rangeValue(majorColorEditorConfig)"
      },
      "context": {
        "majorColorEditorConfig": [
          {
            "value": 0,
            "to": 1,
            "from": 0
          }
        ]
      }
    },
    "viz_fmg_policy_status": {
      "type": "splunk.singlevalue",
      "title": "FMG Policy CRUD",
      "dataSources": {
        "primary": "ds_fmg_policy_status"
      },
      "options": {
        "majorValue": "> sparklineValues | lastPoint()",
        "sparklineValues": "> primary | seriesByName('status')",
        "numberPrecision": 0,
        "majorColor": "> majorValue | rangeValue(majorColorEditorConfig)"
      },
      "context": {
        "majorColorEditorConfig": [
          {
            "value": 0,
            "to": 1,
            "from": 0
          }
        ]
      }
    },
    "viz_fmg_object_status": {
      "type": "splunk.singlevalue",
      "title": "FMG Object CRUD",
      "dataSources": {
        "primary": "ds_fmg_object_status"
      },
      "options": {
        "majorValue": "> sparklineValues | lastPoint()",
        "sparklineValues": "> primary | seriesByName('status')",
        "numberPrecision": 0,
        "majorColor": "> majorValue | rangeValue(majorColorEditorConfig)"
      },
      "context": {
        "majorColorEditorConfig": [
          {
            "value": 0,
            "to": 1,
            "from": 0
          }
        ]
      }
    },
    "viz_control_table": {
      "type": "splunk.table",
      "title": "ì•Œë¦¼ ì œì–´",
      "description": "ê° ì•Œë¦¼ì˜ í˜„ì¬ ìƒíƒœ ë° ì œì–´",
      "dataSources": {
        "primary": "ds_all_alerts"
      },
      "options": {
        "count": 10,
        "dataOverlayMode": "none",
        "drilldown": "row",
        "showRowNumbers": false,
        "showInternalFields": false,
        "columnFormat": {
          "alert_name": {
            "data": "> table | seriesByName('alert_name') | formatByType(alert_nameFormatEditorConfig)",
            "width": 250
          },
          "status": {
            "data": "> table | seriesByName('status') | formatByType(statusFormatEditorConfig)",
            "width": 120
          },
          "action": {
            "data": "> table | seriesByName('action') | formatByType(actionFormatEditorConfig)",
            "width": 150
          }
        }
      },
      "context": {
        "alert_nameFormatEditorConfig": {
          "string": {
            "unitPosition": "after"
          }
        },
        "statusFormatEditorConfig": {
          "string": {
            "unitPosition": "after"
          }
        },
        "actionFormatEditorConfig": {
          "string": {
            "unitPosition": "after"
          }
        }
      }
    }
  },
  "dataSources": {
    "ds_faz_status": {
      "type": "ds.search",
      "options": {
        "query": "| rest /services/saved/searches/FAZ_Critical_Alerts splunk_server=local | fields title, disabled | eval status=if(disabled=0, \"âœ… í™œì„±í™”\", \"âŒ ë¹„í™œì„±í™”\")",
        "queryParameters": {
          "earliest": "-5m",
          "latest": "now"
        },
        "refresh": "30s",
        "refreshType": "delay"
      },
      "name": "FAZ Status"
    },
    "ds_fmg_install_status": {
      "type": "ds.search",
      "options": {
        "query": "| rest /services/saved/searches/FMG_Policy_Install splunk_server=local | fields title, disabled | eval status=if(disabled=0, \"âœ… í™œì„±í™”\", \"âŒ ë¹„í™œì„±í™”\")",
        "queryParameters": {
          "earliest": "-5m",
          "latest": "now"
        },
        "refresh": "30s",
        "refreshType": "delay"
      },
      "name": "FMG Install Status"
    },
    "ds_fmg_policy_status": {
      "type": "ds.search",
      "options": {
        "query": "| rest /services/saved/searches/FMG_Policy_CRUD splunk_server=local | fields title, disabled | eval status=if(disabled=0, \"âœ… í™œì„±í™”\", \"âŒ ë¹„í™œì„±í™”\")",
        "queryParameters": {
          "earliest": "-5m",
          "latest": "now"
        },
        "refresh": "30s",
        "refreshType": "delay"
      },
      "name": "FMG Policy Status"
    },
    "ds_fmg_object_status": {
      "type": "ds.search",
      "options": {
        "query": "| rest /services/saved/searches/FMG_Object_CRUD splunk_server=local | fields title, disabled | eval status=if(disabled=0, \"âœ… í™œì„±í™”\", \"âŒ ë¹„í™œì„±í™”\")",
        "queryParameters": {
          "earliest": "-5m",
          "latest": "now"
        },
        "refresh": "30s",
        "refreshType": "delay"
      },
      "name": "FMG Object Status"
    },
    "ds_all_alerts": {
      "type": "ds.search",
      "options": {
        "query": "| rest /services/saved/searches splunk_server=local | search title IN (\"FAZ_Critical_Alerts\", \"FMG_Policy_Install\", \"FMG_Policy_CRUD\", \"FMG_Object_CRUD\") | fields title, disabled, is_scheduled | eval alert_name=case(title=\"FAZ_Critical_Alerts\", \"ğŸ”´ FAZ Critical Alerts\", title=\"FMG_Policy_Install\", \"ğŸ“¦ FMG Policy Install\", title=\"FMG_Policy_CRUD\", \"âœï¸ FMG Policy CRUD\", title=\"FMG_Object_CRUD\", \"ğŸ”§ FMG Object CRUD\", 1=1, title) | eval status=if(disabled=0 AND is_scheduled=1, \"âœ… í™œì„±í™”\", \"âŒ ë¹„í™œì„±í™”\") | eval action=\"Settings â†’ Searches, reports, and alertsì—ì„œ ì œì–´\" | table alert_name, status, action",
        "queryParameters": {
          "earliest": "-5m",
          "latest": "now"
        },
        "refresh": "30s",
        "refreshType": "delay"
      },
      "name": "All Alerts"
    }
  },
  "defaults": {
    "dataSources": {
      "ds.search": {
        "options": {
          "queryParameters": {
            "latest": "now",
            "earliest": "-24h@h"
          }
        }
      }
    }
  },
  "inputs": {},
  "layout": {
    "type": "absolute",
    "options": {
      "width": 1440,
      "height": 1024,
      "display": "auto-scale",
      "backgroundColor": "#ffffff"
    },
    "structure": [
      {
        "item": "viz_title",
        "type": "block",
        "position": {
          "x": 20,
          "y": 20,
          "w": 1400,
          "h": 100
        }
      },
      {
        "item": "viz_faz_status",
        "type": "block",
        "position": {
          "x": 20,
          "y": 140,
          "w": 340,
          "h": 150
        }
      },
      {
        "item": "viz_fmg_install_status",
        "type": "block",
        "position": {
          "x": 380,
          "y": 140,
          "w": 340,
          "h": 150
        }
      },
      {
        "item": "viz_fmg_policy_status",
        "type": "block",
        "position": {
          "x": 740,
          "y": 140,
          "w": 340,
          "h": 150
        }
      },
      {
        "item": "viz_fmg_object_status",
        "type": "block",
        "position": {
          "x": 1100,
          "y": 140,
          "w": 340,
          "h": 150
        }
      },
      {
        "item": "viz_control_table",
        "type": "block",
        "position": {
          "x": 20,
          "y": 310,
          "w": 900,
          "h": 300
        }
      },
      {
        "item": "viz_instructions",
        "type": "block",
        "position": {
          "x": 940,
          "y": 310,
          "w": 500,
          "h": 600
        }
      }
    ],
    "globalInputs": []
  },
  "description": "FAZ/FMG Slack ì•Œë¦¼ ON/OFF ì œì–´ ëŒ€ì‹œë³´ë“œ (Dashboard Studio)",
  "title": "Slack Alert Control Panel"
}
