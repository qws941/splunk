{
  "visualizations": {
    "viz_title": {
      "type": "viz.markdown",
      "options": {
        "markdown": "# ğŸ›ï¸ Slack ì•Œë¦¼ ì±„ë„ ì œì–´\n\n**index=fw sourcetype=fw_log ê¸°ì¤€**\n\nê° Slack ì±„ë„ë³„ë¡œ ì•Œë¦¼ ON/OFF ì œì–´"
      }
    },
    "viz_faz_critical": {
      "type": "splunk.singlevalue",
      "title": "ğŸ”´ FAZ Critical (#splunk-faz-critical)",
      "dataSources": {
        "primary": "ds_faz_critical"
      },
      "options": {
        "majorValue": "> primary | seriesByName('status_text')",
        "backgroundColor": "> primary | seriesByName('status') | pick(statusColorEditorConfig)"
      },
      "context": {
        "statusColorEditorConfig": {
          "0": "#dc3545",
          "1": "#28a745"
        }
      }
    },
    "viz_fmg_policy": {
      "type": "splunk.singlevalue",
      "title": "ğŸ“¦ FMG Policy (#splunk-fmg-policy)",
      "dataSources": {
        "primary": "ds_fmg_policy"
      },
      "options": {
        "majorValue": "> primary | seriesByName('status_text')",
        "backgroundColor": "> primary | seriesByName('status') | pick(statusColorEditorConfig)"
      },
      "context": {
        "statusColorEditorConfig": {
          "0": "#dc3545",
          "1": "#28a745"
        }
      }
    },
    "viz_fmg_admin": {
      "type": "splunk.singlevalue",
      "title": "ğŸ‘¤ FMG Admin (#splunk-fmg-admin)",
      "dataSources": {
        "primary": "ds_fmg_admin"
      },
      "options": {
        "majorValue": "> primary | seriesByName('status_text')",
        "backgroundColor": "> primary | seriesByName('status') | pick(statusColorEditorConfig)"
      },
      "context": {
        "statusColorEditorConfig": {
          "0": "#dc3545",
          "1": "#28a745"
        }
      }
    },
    "viz_all_events": {
      "type": "splunk.singlevalue",
      "title": "â„¹ï¸ All Events (#splunk-all)",
      "dataSources": {
        "primary": "ds_all_events"
      },
      "options": {
        "majorValue": "> primary | seriesByName('status_text')",
        "backgroundColor": "> primary | seriesByName('status') | pick(statusColorEditorConfig)"
      },
      "context": {
        "statusColorEditorConfig": {
          "0": "#dc3545",
          "1": "#28a745"
        }
      }
    },
    "viz_control_table": {
      "type": "splunk.table",
      "title": "ì•Œë¦¼ ì œì–´ ìƒíƒœ",
      "dataSources": {
        "primary": "ds_control_table"
      },
      "options": {
        "count": 10,
        "dataOverlayMode": "none",
        "drilldown": "none",
        "showRowNumbers": false,
        "columnFormat": {
          "alert_name": {
            "width": 300
          },
          "channel": {
            "width": 200
          },
          "status": {
            "width": 150
          },
          "control": {
            "width": 300
          }
        }
      }
    },
    "viz_instructions": {
      "type": "viz.markdown",
      "options": {
        "markdown": "## ğŸ“– ì‚¬ìš© ë°©ë²•\n\n### ì•Œë¦¼ ON/OFF ì œì–´\n\n**Settings â†’ Searches, reports, and alerts**\n\n1. `Slack_FAZ_Critical_Channel` â†’ Edit â†’ Enable ì²´í¬\n2. `Slack_FMG_Policy_Channel` â†’ Edit â†’ Enable ì²´í¬\n3. `Slack_FMG_Admin_Channel` â†’ Edit â†’ Enable ì²´í¬\n4. `Slack_All_Events_Channel` â†’ Edit â†’ Enable ì²´í¬\n\n---\n\n### Slack ì±„ë„ë³„ ì•Œë¦¼\n\n- **#splunk-faz-critical**: FAZ í¬ë¦¬í‹°ì»¬ ì´ë²¤íŠ¸ë§Œ\n- **#splunk-fmg-policy**: FMG ì •ì±… ì„¤ì¹˜/ë³€ê²½ë§Œ\n- **#splunk-fmg-admin**: FMG ê´€ë¦¬ì ë¡œê·¸ì¸/ì„¤ì •ë³€ê²½ë§Œ\n- **#splunk-all**: ëª¨ë“  ì´ë²¤íŠ¸ í†µí•©\n\n---\n\n### ë°ì´í„° í™•ì¸\n\n```spl\nindex=fw sourcetype=fw_log earliest=-1h\n| stats count by severity, action\n```\n\n---\n\n### ë¬¸ì œ í•´ê²°\n\n1. **ì•Œë¦¼ì´ ì•ˆ ì˜´**: Settings â†’ Alert actions â†’ Slack ì„¤ì • í™•ì¸\n2. **ë°ì´í„° ì—†ìŒ**: `index=fw sourcetype=fw_log` ì¿¼ë¦¬ë¡œ ë°ì´í„° í™•ì¸\n3. **ì±„ë„ ì—†ìŒ**: Slackì—ì„œ ì±„ë„ ìƒì„± í›„ ë´‡ ì´ˆëŒ€"
      }
    },
    "viz_data_sample": {
      "type": "splunk.table",
      "title": "ìµœê·¼ ë°ì´í„° ìƒ˜í”Œ (index=fw sourcetype=fw_log)",
      "dataSources": {
        "primary": "ds_data_sample"
      },
      "options": {
        "count": 10,
        "dataOverlayMode": "none",
        "drilldown": "none",
        "showRowNumbers": true,
        "columnFormat": {
          "_time": {
            "width": 180
          },
          "severity": {
            "width": 100
          },
          "msg": {
            "width": 400
          }
        }
      }
    }
  },
  "dataSources": {
    "ds_faz_critical": {
      "type": "ds.search",
      "options": {
        "query": "| rest /services/saved/searches/Slack_FAZ_Critical_Channel splunk_server=local | fields disabled, is_scheduled | eval status=if(disabled=0 AND is_scheduled=1, 1, 0) | eval status_text=if(status=1, \"âœ… ON\", \"âŒ OFF\")",
        "refresh": "30s",
        "refreshType": "delay"
      }
    },
    "ds_fmg_policy": {
      "type": "ds.search",
      "options": {
        "query": "| rest /services/saved/searches/Slack_FMG_Policy_Channel splunk_server=local | fields disabled, is_scheduled | eval status=if(disabled=0 AND is_scheduled=1, 1, 0) | eval status_text=if(status=1, \"âœ… ON\", \"âŒ OFF\")",
        "refresh": "30s",
        "refreshType": "delay"
      }
    },
    "ds_fmg_admin": {
      "type": "ds.search",
      "options": {
        "query": "| rest /services/saved/searches/Slack_FMG_Admin_Channel splunk_server=local | fields disabled, is_scheduled | eval status=if(disabled=0 AND is_scheduled=1, 1, 0) | eval status_text=if(status=1, \"âœ… ON\", \"âŒ OFF\")",
        "refresh": "30s",
        "refreshType": "delay"
      }
    },
    "ds_all_events": {
      "type": "ds.search",
      "options": {
        "query": "| rest /services/saved/searches/Slack_All_Events_Channel splunk_server=local | fields disabled, is_scheduled | eval status=if(disabled=0 AND is_scheduled=1, 1, 0) | eval status_text=if(status=1, \"âœ… ON\", \"âŒ OFF\")",
        "refresh": "30s",
        "refreshType": "delay"
      }
    },
    "ds_control_table": {
      "type": "ds.search",
      "options": {
        "query": "| rest /services/saved/searches splunk_server=local | search title IN (\"Slack_FAZ_Critical_Channel\", \"Slack_FMG_Policy_Channel\", \"Slack_FMG_Admin_Channel\", \"Slack_All_Events_Channel\") | fields title, disabled, is_scheduled | eval alert_name=case(title=\"Slack_FAZ_Critical_Channel\", \"ğŸ”´ FAZ Critical\", title=\"Slack_FMG_Policy_Channel\", \"ğŸ“¦ FMG Policy\", title=\"Slack_FMG_Admin_Channel\", \"ğŸ‘¤ FMG Admin\", title=\"Slack_All_Events_Channel\", \"â„¹ï¸ All Events\", 1=1, title) | eval channel=case(title=\"Slack_FAZ_Critical_Channel\", \"#splunk-faz-critical\", title=\"Slack_FMG_Policy_Channel\", \"#splunk-fmg-policy\", title=\"Slack_FMG_Admin_Channel\", \"#splunk-fmg-admin\", title=\"Slack_All_Events_Channel\", \"#splunk-all\", 1=1, \"N/A\") | eval status=if(disabled=0 AND is_scheduled=1, \"âœ… ON\", \"âŒ OFF\") | eval control=\"Settings â†’ Searches, reports, and alerts â†’ Edit\" | table alert_name, channel, status, control",
        "refresh": "30s",
        "refreshType": "delay"
      }
    },
    "ds_data_sample": {
      "type": "ds.search",
      "options": {
        "query": "index=fw sourcetype=fw_log earliest=-1h latest=now | head 10 | table _time, severity, level, action, msg",
        "refresh": "1m",
        "refreshType": "delay"
      }
    }
  },
  "defaults": {
    "dataSources": {
      "ds.search": {
        "options": {
          "queryParameters": {
            "latest": "now",
            "earliest": "-24h@h"
          }
        }
      }
    }
  },
  "inputs": {},
  "layout": {
    "type": "absolute",
    "options": {
      "width": 1440,
      "height": 1200,
      "display": "auto-scale",
      "backgroundColor": "#f5f5f5"
    },
    "structure": [
      {
        "item": "viz_title",
        "type": "block",
        "position": {
          "x": 20,
          "y": 20,
          "w": 1400,
          "h": 80
        }
      },
      {
        "item": "viz_faz_critical",
        "type": "block",
        "position": {
          "x": 20,
          "y": 120,
          "w": 340,
          "h": 120
        }
      },
      {
        "item": "viz_fmg_policy",
        "type": "block",
        "position": {
          "x": 380,
          "y": 120,
          "w": 340,
          "h": 120
        }
      },
      {
        "item": "viz_fmg_admin",
        "type": "block",
        "position": {
          "x": 740,
          "y": 120,
          "w": 340,
          "h": 120
        }
      },
      {
        "item": "viz_all_events",
        "type": "block",
        "position": {
          "x": 1100,
          "y": 120,
          "w": 340,
          "h": 120
        }
      },
      {
        "item": "viz_control_table",
        "type": "block",
        "position": {
          "x": 20,
          "y": 260,
          "w": 900,
          "h": 250
        }
      },
      {
        "item": "viz_data_sample",
        "type": "block",
        "position": {
          "x": 20,
          "y": 530,
          "w": 900,
          "h": 350
        }
      },
      {
        "item": "viz_instructions",
        "type": "block",
        "position": {
          "x": 940,
          "y": 260,
          "w": 500,
          "h": 620
        }
      }
    ],
    "globalInputs": []
  },
  "description": "Slack ì•Œë¦¼ ì±„ë„ë³„ ON/OFF ì œì–´ (index=fw sourcetype=fw_log)",
  "title": "Slack Channel Control - FW Log"
}
