# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Slack Block Kit Custom Alert Action Configuration
# Version: 1.0
# Date: 2025-11-02
# Purpose: Enable interactive Slack notifications with Block Kit UI
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Custom Alert Action Definition
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[slack_blockkit]
# âœ… Activate custom alert action
is_custom = 1

# ğŸ“ Display labels in Splunk Web UI
label = Slack Block Kit Alert
description = Send interactive Slack notification with Block Kit UI

# ğŸ¨ Visual icon in UI
icon_path = appIcon.png

# âš™ï¸ Alert action parameters (user-configurable)
param.channel =
param.severity = info
param.title = Splunk Alert

# ğŸ Python script execution
command = slack_blockkit_alert.py

# ğŸ”’ Security: Don't track results (contains sensitive data)
track_alert = 0

# ğŸ“Š Allow in scheduled searches
supports_adhoc = 0

# â±ï¸ Maximum runtime (30 seconds)
maxresults = 10000
ttl = 30

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Environment Variables Required
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
#
# Set in /opt/splunk/etc/splunk-launch.conf:
#
# SLACK_BOT_TOKEN=SLACK_BOT_TOKEN_PLACEHOLDER-HERE
# SPLUNK_HOST=splunk.jclee.me
#
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# Deployment Instructions
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
#
# 1. Copy this file to Splunk:
#    sudo cp configs/alert_actions-slack-blockkit.conf \
#        /opt/splunk/etc/apps/search/local/alert_actions.conf
#
# 2. Copy Python script to Splunk:
#    sudo cp scripts/slack_blockkit_alert.py \
#        /opt/splunk/etc/apps/search/bin/
#    sudo chmod +x /opt/splunk/etc/apps/search/bin/slack_blockkit_alert.py
#
# 3. Set environment variables in splunk-launch.conf
#
# 4. Restart Splunk:
#    sudo -u splunk /opt/splunk/bin/splunk restart
#
# 5. Verify custom action loaded:
#    curl -k -u admin:password \
#      "https://splunk.jclee.me:8089/services/admin/alert_actions?output_mode=json" \
#      | jq '.entry[] | select(.name == "slack_blockkit")'
#
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
