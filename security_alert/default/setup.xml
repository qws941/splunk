<setup>
  <block title="Slack Authentication" endpoint="configs/conf-alert_actions" entity="slack">
    <text>
      Configure Slack integration using ONE of the following methods:
      - Bot Token (Recommended): Supports more features
      - Webhook URL (Alternative): Simpler but limited functionality
    </text>

    <input field="param.slack_app_oauth_token">
      <label>Bot Token (Recommended)</label>
      <type>text</type>
    </input>

    <text>
      Example: xoxb-YOUR-BOT-TOKEN-HERE
    </text>

    <input field="param.webhook_url">
      <label>Webhook URL (Alternative)</label>
      <type>text</type>
    </input>

    <text>
      Example: https://hooks.slack.com/services/YOUR-WEBHOOK-URL-HERE
    </text>
  </block>

  <block title="Slack Channel Configuration" endpoint="configs/conf-alert_actions" entity="slack">
    <text>
      Specify the Slack channel to receive notifications.
      The bot must be invited to the channel before sending messages.
    </text>

    <input field="param.channel">
      <label>Slack Channel (include #)</label>
      <type>text</type>
    </input>

    <text>
      Examples:
      - #security-firewall-alert
      - #security-alerts
      - #ops-notifications
    </text>
  </block>

  <block title="Proxy Configuration (Optional)" endpoint="configs/conf-alert_actions" entity="slack">
    <text>
      Configure proxy server if required for internet access.
      Leave blank if no proxy is needed.
    </text>

    <input field="param.proxy_enabled">
      <label>Enable Proxy</label>
      <type>checkbox</type>
    </input>

    <input field="param.proxy_url">
      <label>Proxy Server</label>
      <type>text</type>
    </input>

    <text>
      Supported formats:
      - http://proxy.company.com
      - proxy.company.com
    </text>

    <input field="param.proxy_port">
      <label>Proxy Port</label>
      <type>text</type>
    </input>

    <text>
      Examples: 8080, 3128, 8888
    </text>

    <input field="param.proxy_username">
      <label>Proxy Username (Optional)</label>
      <type>text</type>
    </input>

    <input field="param.proxy_password">
      <label>Proxy Password (Optional)</label>
      <type>password</type>
    </input>
  </block>

  <block title="Setup Guide">
    <text>
      ============================================================
      Bot Token Setup (Recommended Method)
      ============================================================

      1. Visit https://api.slack.com/apps
      2. Click "Create New App" and select "From scratch"
      3. Enter App Name (e.g., FortiGate Security Alerts)
      4. Navigate to "OAuth &amp; Permissions" in the left menu
      5. Add the following Bot Token Scopes:
         - chat:write
         - chat:write.public
         - channels:read
      6. Click "Install to Workspace" at the top
      7. Copy the "Bot User OAuth Token" (starts with xoxb-)
      8. Paste the token in the "Bot Token" field above
      9. Invite the bot to your channel: /invite @YourBotName

      ============================================================
      Webhook URL Setup (Alternative Method)
      ============================================================

      1. Visit https://api.slack.com/apps
      2. Select your app and go to "Incoming Webhooks"
      3. Turn on "Activate Incoming Webhooks"
      4. Click "Add New Webhook to Workspace"
      5. Select the channel to receive notifications
      6. Copy the generated Webhook URL
      7. Paste the URL in the "Webhook URL" field above

      ============================================================
      Important Notes
      ============================================================

      - Default channel: #security-firewall-alert (recommended)
      - Use EITHER Bot Token OR Webhook URL (not both)
      - Proxy settings are optional (only if required)
      - Send a test alert to verify configuration
    </text>
  </block>
</setup>
